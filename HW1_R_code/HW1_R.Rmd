---
title: "HW1 Econometrics 3"
author: "Matthew Aaron Looney"
date: "9/11/2017"
output: pdf_document
---

```{r, echo=FALSE, message=FALSE, results='asis', cache=F}

system.time({
  
n=20 # sample size
k=3 # number of paramaters in model
reps <- 1e2 # number of ols iterations
i <- 1 # counter
temp <- matrix(nrow = reps, ncol = k) # matrix to stuff results into dim= "reps" X 3

for(i in 1:reps){
  
e <- rnorm(n=n, mean=0, sd=5) # n-random normal draws for error term
x1 <- rnorm(n=n, mean=100, sd=7) # n-random normal draws for x1 data
x2 <- rnorm(n=n, mean=1000, sd=10) # n-random normal draws for x2 data

y <- 10+ 1* x1+ 1* x2 +e # construct model

X <- matrix(c(rep(1, n), x1, x2), nrow=n, ncol=k) # gather X-data into single matrix

b_ols <- solve(crossprod(X, X)) %*% crossprod(X, y) # faster to use matrix algebra over lm function

temp[i, 1] <- b_ols[1]
temp[i, 2] <- b_ols[2]
temp[i, 3] <- b_ols[3]

i <- i+1
}
})
  
dimnames(temp) <- list(c(), c("beta_0", "beta_1", "beta_2"))
  
mu_betas <- matrix(nrow=3, ncol=1)
mu_betas[1,1] <- mean(temp[,1])
mu_betas[2,1] <- mean(temp[,2])
mu_betas[3,1] <- mean(temp[,3])
dimnames(mu_betas) <- list(c(), c("betas"))
mu_betas

ehat <- y-(X %*% b_ols)

sigma2 <- (t(ehat) %*% ehat) / (n-k)
sigma2 <- as.numeric(sigma2)

covb <- sigma2 * solve(crossprod(X, X))
se_b <- sqrt(diag(covb))
t_val <- mu_betas/se_b
dimnames(t_val) <- list(c(), c("t_values"))
t_val

e_test <- y-(X%*%mu_betas)

```
  
```{r, echo=FALSE, message=FALSE, results='asis', fig.height=3}

par(mfrow=c(1,3))
hist(temp[,1])
hist(temp[,2])
hist(temp[,3])

```












